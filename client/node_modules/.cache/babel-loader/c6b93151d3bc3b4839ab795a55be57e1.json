{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"./styles.module.css\";\nimport Navigation from \"../NavBar\";\nimport axios from \"axios\"; // Import axios\n\nconst BudgetPlan = () => {\n  _s();\n\n  const [budgets, setBudgets] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [message, setMessage] = useState(\"\"); // ... (Form and Editing state - no changes needed)\n\n  const apiUrl = \"http://localhost:8080/api\";\n  useEffect(() => {\n    fetchBudgets();\n  }, []);\n\n  const fetchBudgets = async () => {\n    try {\n      const token = localStorage.getItem('token'); // Get token from local storage\n\n      const res = await axios.get(`${apiUrl}/budgetplan`, {\n        headers: {\n          'Authorization': `Bearer ${token}` // Send token in header\n\n        }\n      });\n      setBudgets(res.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message); // Improved error handling\n    }\n  };\n\n  const handleSubmit = async () => {\n    // ... (Validation - no changes needed)\n    try {\n      const token = localStorage.getItem('token');\n      const res = await axios.post(`${apiUrl}/budgetplan`, {\n        name,\n        total: Number(total),\n        spent: Number(spent) || 0,\n        items: Number(items) || 0,\n        icon: icon || \"ğŸ’°\"\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      setMessage(\"Budget plan created successfully!\"); // ... (Clear form fields)\n\n      fetchBudgets();\n      setTimeout(() => setMessage(\"\"), 3000);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message); // Improved error handling\n    }\n  };\n\n  const handleDelete = async id => {\n    if (window.confirm(\"Are you sure you want to delete this budget plan?\")) {\n      try {\n        const token = localStorage.getItem('token');\n        const res = await axios.delete(`${apiUrl}/budgetplan/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        setMessage(\"Budget plan deleted successfully\");\n        fetchBudgets();\n        setTimeout(() => setMessage(\"\"), 3000);\n      } catch (err) {\n        var _err$response3, _err$response3$data;\n\n        setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || err.message); // Improved error handling\n      }\n    }\n  };\n\n  const handleUpdate = async () => {\n    // ... (Validation - no changes needed)\n    try {\n      const token = localStorage.getItem('token');\n      const res = await axios.put(`${apiUrl}/budgetplan/${editId}`, {\n        name: editName,\n        total: Number(editTotal),\n        spent: Number(editSpent) || 0,\n        items: Number(editItems) || 0,\n        icon: editIcon || \"ğŸ’°\"\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      setMessage(\"Budget plan updated successfully\");\n      setEditId(null);\n      fetchBudgets();\n      setTimeout(() => setMessage(\"\"), 3000);\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || err.message); // Improved error handling\n    }\n  }; // ... (rest of the component - no changes needed)\n\n};\n\n_s(BudgetPlan, \"5LQ7O6zSnx3IwZJ1SQ1g5K8+27E=\");\n\n_c = BudgetPlan;\nexport default BudgetPlan;\n\nvar _c;\n\n$RefreshReg$(_c, \"BudgetPlan\");","map":{"version":3,"sources":["C:/Users/Aishwarya/Desktop/PRACTICE/newwexpo/expo - Copy/client/src/components/Budgetplan/index.jsx"],"names":["React","useState","useEffect","styles","Navigation","axios","BudgetPlan","budgets","setBudgets","error","setError","message","setMessage","apiUrl","fetchBudgets","token","localStorage","getItem","res","get","headers","data","err","response","handleSubmit","post","name","total","Number","spent","items","icon","setTimeout","handleDelete","id","window","confirm","delete","handleUpdate","put","editId","editName","editTotal","editSpent","editItems","editIcon","setEditId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styles from \"./styles.module.css\";\nimport Navigation from \"../NavBar\";\nimport axios from \"axios\"; // Import axios\n\nconst BudgetPlan = () => {\n  const [budgets, setBudgets] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  // ... (Form and Editing state - no changes needed)\n\n  const apiUrl = \"http://localhost:8080/api\";\n\n  useEffect(() => {\n    fetchBudgets();\n  }, []);\n\n  const fetchBudgets = async () => {\n    try {\n      const token = localStorage.getItem('token'); // Get token from local storage\n\n      const res = await axios.get(`${apiUrl}/budgetplan`, {\n        headers: {\n          'Authorization': `Bearer ${token}` // Send token in header\n        }\n      });\n\n      setBudgets(res.data);\n    } catch (err) {\n      setError(err.response?.data?.message || err.message); // Improved error handling\n    }\n  };\n\n\n  const handleSubmit = async () => {\n    // ... (Validation - no changes needed)\n    try {\n      const token = localStorage.getItem('token');\n\n      const res = await axios.post(`${apiUrl}/budgetplan`, {\n        name,\n        total: Number(total),\n        spent: Number(spent) || 0,\n        items: Number(items) || 0,\n        icon: icon || \"ğŸ’°\",\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      setMessage(\"Budget plan created successfully!\");\n      // ... (Clear form fields)\n      fetchBudgets();\n      setTimeout(() => setMessage(\"\"), 3000);\n    } catch (err) {\n      setError(err.response?.data?.message || err.message); // Improved error handling\n    }\n  };\n\n  const handleDelete = async (id) => {\n    if (window.confirm(\"Are you sure you want to delete this budget plan?\")) {\n      try {\n        const token = localStorage.getItem('token');\n\n        const res = await axios.delete(`${apiUrl}/budgetplan/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        setMessage(\"Budget plan deleted successfully\");\n        fetchBudgets();\n        setTimeout(() => setMessage(\"\"), 3000);\n      } catch (err) {\n        setError(err.response?.data?.message || err.message); // Improved error handling\n      }\n    }\n  };\n\n  const handleUpdate = async () => {\n    // ... (Validation - no changes needed)\n    try {\n      const token = localStorage.getItem('token');\n\n      const res = await axios.put(`${apiUrl}/budgetplan/${editId}`, {\n        name: editName,\n        total: Number(editTotal),\n        spent: Number(editSpent) || 0,\n        items: Number(editItems) || 0,\n        icon: editIcon || \"ğŸ’°\",\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      setMessage(\"Budget plan updated successfully\");\n      setEditId(null);\n      fetchBudgets();\n      setTimeout(() => setMessage(\"\"), 3000);\n    } catch (err) {\n      setError(err.response?.data?.message || err.message); // Improved error handling\n    }\n  };\n\n  // ... (rest of the component - no changes needed)\n\n};\n\nexport default BudgetPlan;"]},"metadata":{},"sourceType":"module"}