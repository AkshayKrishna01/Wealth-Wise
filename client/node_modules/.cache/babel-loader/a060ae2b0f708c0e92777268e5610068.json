{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aishwarya\\\\Desktop\\\\PRACTICE\\\\newwexpo\\\\expo - Copy\\\\client\\\\src\\\\components\\\\DashBoard\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport styles from \"./styles.module.css\";\nimport Footer from \"../footer/index\";\nimport Pie from \"../piechart/Pie\";\nimport Line from \"../Linegraph/Line\";\nimport Navigation from \"../NavBar/index\";\nimport Bar from \"../Bargraph/bargraph\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const [incomes, setIncomes] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [expenses, setExpenses] = useState([]);\n  const [budgets, setBudgets] = useState([]); // Updated base API URL with /api prefix for endpoints\n\n  const apiUrl = \"http://localhost:8080\"; // Helper to get auth headers from localStorage\n\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem(\"token\");\n    return {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    };\n  };\n\n  useEffect(() => {\n    getItems();\n    fetchExpenses();\n    fetchBudgets();\n  }, []); // Fetch all budget plans for the authenticated user\n\n  const fetchBudgets = async () => {\n    try {\n      const res = await fetch(`${apiUrl}/api/budgetplan`, {\n        headers: getAuthHeaders()\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch budget plans\");\n      const data = await res.json();\n      setBudgets(data);\n    } catch (err) {\n      setError(err.message);\n    }\n  }; // Fetch expenses with auth headers\n\n\n  const fetchExpenses = () => {\n    fetch(`${apiUrl}/api/expense`, {\n      method: \"GET\",\n      headers: getAuthHeaders()\n    }).then(res => res.json()).then(data => setExpenses(data)).catch(() => setError(\"Failed to fetch expenses\"));\n  }; // Fetch incomes for the authenticated user\n\n\n  const getItems = () => {\n    fetch(`${apiUrl}/income`, {\n      method: \"GET\",\n      headers: getAuthHeaders()\n    }).then(res => res.json()).then(data => setIncomes(data)).catch(() => setError(\"Failed to fetch incomes\"));\n  };\n\n  const totalIncome = incomes.reduce((sum, item) => sum + item.Amount, 0);\n  const totalExpense = expenses.reduce((sum, item) => sum + item.amount, 0);\n  const remainingBalance = totalIncome - totalExpense;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main_container,\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.row1,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.summaryRow,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.summaryCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Total Income\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.num,\n              children: [\"$\", totalIncome]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.summaryCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Total Expense\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.num2,\n              children: [\"$\", totalExpense]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.remainingAndPie,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.remainingCard,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Remaining Balance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.num3,\n              children: [\"$\", remainingBalance]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.pieChartWrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Expense Distribution\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Pie, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.row2,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chartWrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Income vs Expense Trend\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Line, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chartWrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Budget Breakdown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.row3,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"My Budget Plans\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.error_msg,\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.budgetGrid,\n          children: budgets.map(plan => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.budgetCard,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.budgetHeader,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.icon,\n                children: plan.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.budgetTitle,\n                children: plan.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.amount,\n                children: [\"$\", plan.total]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [plan.items, \" Item(s)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.progressBar,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.progress,\n                style: {\n                  width: plan.total > 0 ? `${plan.spent / plan.total * 100}%` : \"0%\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.budgetInfo,\n              children: [\"$\", plan.spent, \" Spent | $\", plan.total - plan.spent, \" Remaining\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this)]\n          }, plan._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.foot,\n      children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"xQQWO2Gpx+D+bjrVvhOq1VAk+5A=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["C:/Users/Aishwarya/Desktop/PRACTICE/newwexpo/expo - Copy/client/src/components/DashBoard/index.jsx"],"names":["useEffect","useState","styles","Footer","Pie","Line","Navigation","Bar","Main","incomes","setIncomes","error","setError","expenses","setExpenses","budgets","setBudgets","apiUrl","getAuthHeaders","token","localStorage","getItem","getItems","fetchExpenses","fetchBudgets","res","fetch","headers","ok","Error","data","json","err","message","method","then","catch","totalIncome","reduce","sum","item","Amount","totalExpense","amount","remainingBalance","main_container","row1","summaryRow","summaryCard","num","num2","remainingAndPie","remainingCard","num3","pieChartWrapper","row2","chartWrapper","row3","error_msg","budgetGrid","map","plan","budgetCard","budgetHeader","icon","budgetTitle","name","total","items","progressBar","progress","width","spent","budgetInfo","_id","foot"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport styles from \"./styles.module.css\";\nimport Footer from \"../footer/index\";\nimport Pie from \"../piechart/Pie\";\nimport Line from \"../Linegraph/Line\";\nimport Navigation from \"../NavBar/index\";\nimport Bar from \"../Bargraph/bargraph\";\n\nconst Main = () => {\n  const [incomes, setIncomes] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [expenses, setExpenses] = useState([]);\n  const [budgets, setBudgets] = useState([]);\n  \n  // Updated base API URL with /api prefix for endpoints\n  const apiUrl = \"http://localhost:8080\";\n\n  // Helper to get auth headers from localStorage\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem(\"token\");\n    return {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`,\n    };\n  };\n\n  useEffect(() => {\n    getItems();\n    fetchExpenses();\n    fetchBudgets();\n  }, []);\n\n  // Fetch all budget plans for the authenticated user\n  const fetchBudgets = async () => {\n    try {\n      const res = await fetch(`${apiUrl}/api/budgetplan`, { headers: getAuthHeaders() });\n      if (!res.ok) throw new Error(\"Failed to fetch budget plans\");\n      const data = await res.json();\n      setBudgets(data);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Fetch expenses with auth headers\n  const fetchExpenses = () => {\n    fetch(`${apiUrl}/api/expense`, { method: \"GET\", headers: getAuthHeaders() })\n      .then((res) => res.json())\n      .then((data) => setExpenses(data))\n      .catch(() => setError(\"Failed to fetch expenses\"));\n  };\n\n  // Fetch incomes for the authenticated user\n  const getItems = () => {\n    fetch(`${apiUrl}/income`, { method: \"GET\", headers: getAuthHeaders() })\n      .then((res) => res.json())\n      .then((data) => setIncomes(data))\n      .catch(() => setError(\"Failed to fetch incomes\"));\n  };\n\n  const totalIncome = incomes.reduce((sum, item) => sum + item.Amount, 0);\n  const totalExpense = expenses.reduce((sum, item) => sum + item.amount, 0);\n  const remainingBalance = totalIncome - totalExpense; \n\n  return (\n    <div>\n      <Navigation />\n      <div className={styles.main_container}>\n        {/* Row 1: Overview */}\n        <section className={styles.row1}>\n          <div className={styles.summaryRow}>\n            <div className={styles.summaryCard}>\n              <h2>Total Income</h2>\n              <p className={styles.num}>${totalIncome}</p>\n            </div>\n            <div className={styles.summaryCard}>\n              <h2>Total Expense</h2>\n              <p className={styles.num2}>${totalExpense}</p>\n            </div>\n          </div>\n          <div className={styles.remainingAndPie}>\n            <div className={styles.remainingCard}>\n              <h2>Remaining Balance</h2>\n              <p className={styles.num3}>${remainingBalance}</p>\n            </div>\n            <div className={styles.pieChartWrapper}>\n              <h2>Expense Distribution</h2>\n              <Pie />\n            </div>\n          </div>\n        </section>\n\n        {/* Row 2: Additional Graphs */}\n        <section className={styles.row2}>\n          <div className={styles.chartWrapper}>\n            <h2>Income vs Expense Trend</h2>\n            <Line />\n          </div>\n          <div className={styles.chartWrapper}>\n            <h2>Budget Breakdown</h2>\n            <Bar />\n          </div>\n        </section>\n\n        {/* Row 3: Budget Plans */}\n        <section className={styles.row3}>\n          <h2>My Budget Plans</h2>\n          {error && <div className={styles.error_msg}>{error}</div>}\n          <div className={styles.budgetGrid}>\n            {budgets.map((plan) => (\n              <div key={plan._id} className={styles.budgetCard}>\n                <div className={styles.budgetHeader}>\n                  <span className={styles.icon}>{plan.icon}</span>\n                  <span className={styles.budgetTitle}>{plan.name}</span>\n                  <span className={styles.amount}>${plan.total}</span>\n                </div>\n                <p>{plan.items} Item(s)</p>\n                <div className={styles.progressBar}>\n                  <div\n                    className={styles.progress}\n                    style={{ width: plan.total > 0 ? `${(plan.spent / plan.total) * 100}%` : \"0%\" }}\n                  ></div>\n                </div>\n                <p className={styles.budgetInfo}>\n                  ${plan.spent} Spent | ${plan.total - plan.spent} Remaining\n                </p>\n              </div>\n            ))}\n          </div>\n        </section>\n      </div>\n      <div className={styles.foot}>\n        <Footer />\n      </div>\n    </div>\n  );\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}