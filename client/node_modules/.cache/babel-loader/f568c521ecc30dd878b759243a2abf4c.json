{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aishwarya\\\\Desktop\\\\PRACTICE\\\\newwexpo\\\\expo - Copy\\\\client\\\\src\\\\components\\\\Linegraph\\\\Line.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport styles from \"./style.module.css\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\"; // Register ChartJS components\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nexport default function DailyGraph() {\n  _s();\n\n  const [graphData, setGraphData] = useState([]);\n  const [error, setError] = useState(\"\"); // Base API URL\n\n  const apiUrl = \"http://localhost:8080/api\"; // Helper: get auth headers (assumes token stored in localStorage)\n\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem(\"token\");\n    return {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    };\n  }; // Fetch the aggregated daily expense data when the component mounts\n\n\n  useEffect(() => {\n    fetchGraphData();\n  }, []);\n\n  const fetchGraphData = async () => {\n    try {\n      const res = await fetch(`${apiUrl}/expense/graph/daily`, {\n        headers: getAuthHeaders()\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Failed to fetch daily graph data\");\n      }\n\n      const data = await res.json();\n      console.log(\"Aggregated Daily Data:\", data);\n      setGraphData(data);\n    } catch (err) {\n      console.error(\"Error fetching daily graph data:\", err);\n      setError(err.message || \"Failed to fetch daily graph data\");\n    }\n  }; // Prepare chart labels and data from the aggregated response\n  // Expected data format: [{ _id: \"YYYY-MM-DD\", totalAmount: Number }, ...]\n\n\n  const labels = graphData.map(item => item._id);\n  const dataset = graphData.map(item => item.totalAmount);\n  const chartData = {\n    labels: labels,\n    datasets: [{\n      label: \"Daily Expense\",\n      data: dataset,\n      borderColor: \"blue\",\n      backgroundColor: \"lightblue\",\n      tension: 0.3\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: \"top\"\n      },\n      title: {\n        display: true,\n        text: \"Daily Expense Graph\"\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.graphContainer,\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: chartOptions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DailyGraph, \"ZDmp+wpJch2cv0JAPmOEixyXuOc=\");\n\n_c = DailyGraph;\n\nvar _c;\n\n$RefreshReg$(_c, \"DailyGraph\");","map":{"version":3,"sources":["C:/Users/Aishwarya/Desktop/PRACTICE/newwexpo/expo - Copy/client/src/components/Linegraph/Line.js"],"names":["useState","useEffect","styles","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","register","DailyGraph","graphData","setGraphData","error","setError","apiUrl","getAuthHeaders","token","localStorage","getItem","fetchGraphData","res","fetch","headers","ok","Error","data","json","console","log","err","message","labels","map","item","_id","dataset","totalAmount","chartData","datasets","label","borderColor","backgroundColor","tension","chartOptions","responsive","plugins","legend","position","title","display","text","graphContainer"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\"; \r\nimport styles from \"./style.module.css\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nexport default function DailyGraph() {\r\n  const [graphData, setGraphData] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Base API URL\r\n  const apiUrl = \"http://localhost:8080/api\";\r\n\r\n  // Helper: get auth headers (assumes token stored in localStorage)\r\n  const getAuthHeaders = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    return {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": `Bearer ${token}`\r\n    };\r\n  };\r\n\r\n  // Fetch the aggregated daily expense data when the component mounts\r\n  useEffect(() => {\r\n    fetchGraphData();\r\n  }, []);\r\n\r\n  const fetchGraphData = async () => {\r\n    try {\r\n      const res = await fetch(`${apiUrl}/expense/graph/daily`, { headers: getAuthHeaders() });\r\n      if (!res.ok) {\r\n        throw new Error(\"Failed to fetch daily graph data\");\r\n      }\r\n      const data = await res.json();\r\n      console.log(\"Aggregated Daily Data:\", data);\r\n      setGraphData(data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching daily graph data:\", err);\r\n      setError(err.message || \"Failed to fetch daily graph data\");\r\n    }\r\n  };\r\n\r\n  // Prepare chart labels and data from the aggregated response\r\n  // Expected data format: [{ _id: \"YYYY-MM-DD\", totalAmount: Number }, ...]\r\n  const labels = graphData.map(item => item._id);\r\n  const dataset = graphData.map(item => item.totalAmount);\r\n\r\n  const chartData = {\r\n    labels: labels,\r\n    datasets: [{\r\n      label: \"Daily Expense\",\r\n      data: dataset,\r\n      borderColor: \"blue\",\r\n      backgroundColor: \"lightblue\",\r\n      tension: 0.3,\r\n    }],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: { position: \"top\" },\r\n      title: { display: true, text: \"Daily Expense Graph\" },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className={styles.graphContainer}>\r\n      {error && <p>{error}</p>}\r\n      <Line data={chartData} options={chartOptions} />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}