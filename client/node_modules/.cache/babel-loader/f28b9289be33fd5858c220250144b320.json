{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aishwarya\\\\Desktop\\\\PRACTICE\\\\newwexpo\\\\expo - Copy\\\\client\\\\src\\\\components\\\\DashBoard\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport styles from \"./styles.module.css\";\nimport Footer from \"../footer/index\";\nimport Pie from \"../piechart/Pie\";\nimport Line from \"../Linegraph/Line\";\nimport Navigation from \"../NavBar/index\";\nimport Bar from \"../Bargraph/bargraph\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const [incomes, setIncomes] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [expenses, setExpenses] = useState([]);\n  const [budgets, setBudgets] = useState([]); // Updated base API URL with /api prefix\n\n  const apiUrl = \"http://localhost:8080\"; // Helper to get the auth headers from localStorage\n\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem(\"token\");\n    return {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    };\n  };\n\n  useEffect(() => {\n    getItems();\n    fetchExpenses();\n    fetchBudgets();\n  }, []); // Fetch all budget plans for the authenticated user\n\n  const fetchBudgets = async () => {\n    try {\n      const res = await fetch(`${apiUrl}/api/budgetplan`, {\n        headers: getAuthHeaders()\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch budget plans\");\n      const data = await res.json();\n      setBudgets(data);\n    } catch (err) {\n      setError(err.message);\n    }\n  }; // Fetch expenses from backend with auth headers\n\n\n  const fetchExpenses = () => {\n    fetch(`${apiUrl}/api/expense`, {\n      method: \"GET\",\n      headers: getAuthHeaders()\n    }).then(res => res.json()).then(data => setExpenses(data)).catch(() => setError(\"Failed to fetch expenses\"));\n  }; // Fetch incomes for the authenticated user\n\n\n  const getItems = () => {\n    fetch(`${apiUrl}/income`, {\n      method: \"GET\",\n      headers: getAuthHeaders()\n    }).then(res => res.json()).then(data => setIncomes(data)).catch(() => setError(\"Failed to fetch incomes\"));\n  };\n\n  const totalIncome = incomes.reduce((sum, item) => sum + item.Amount, 0);\n  const totalExpense = expenses.reduce((sum, item) => sum + item.amount, 0);\n  const remainingBalance = totalIncome - totalExpense;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main_container,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.dashboardHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"An overview of your financial status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.overview,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.summaryCard,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Total Income\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.num,\n            children: [\"$\", totalIncome]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.summaryCard,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Total Expense\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.num2,\n            children: [\"$\", totalExpense]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.summaryCard,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Remaining Balance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.num3,\n            children: [\"$\", remainingBalance]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.chartsSection,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.pie,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Expense Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Pie, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chartWrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Budget Breakdown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chartWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Income vs Expense Trend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Line, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.showBudget,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Budget Plans\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.error_msg,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.budgetGrid,\n        children: budgets.map(plan => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.budgetCard,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.budgetHeader,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.icon,\n              children: plan.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.budgetTitle,\n              children: plan.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.amount,\n              children: [\"$\", plan.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [plan.items, \" Item(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.progressBar,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.progress,\n              style: {\n                width: plan.total > 0 ? `${plan.spent / plan.total * 100}%` : \"0%\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.budgetInfo,\n            children: [\"$\", plan.spent, \" Spent | $\", plan.total - plan.spent, \" Remaining\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)]\n        }, plan._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.foot,\n      children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"xQQWO2Gpx+D+bjrVvhOq1VAk+5A=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["C:/Users/Aishwarya/Desktop/PRACTICE/newwexpo/expo - Copy/client/src/components/DashBoard/index.jsx"],"names":["useEffect","useState","styles","Footer","Pie","Line","Navigation","Bar","Main","incomes","setIncomes","error","setError","expenses","setExpenses","budgets","setBudgets","apiUrl","getAuthHeaders","token","localStorage","getItem","getItems","fetchExpenses","fetchBudgets","res","fetch","headers","ok","Error","data","json","err","message","method","then","catch","totalIncome","reduce","sum","item","Amount","totalExpense","amount","remainingBalance","main_container","dashboardHeader","overview","summaryCard","num","num2","num3","chartsSection","pie","chartWrapper","showBudget","error_msg","budgetGrid","map","plan","budgetCard","budgetHeader","icon","budgetTitle","name","total","items","progressBar","progress","width","spent","budgetInfo","_id","foot"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport styles from \"./styles.module.css\";\nimport Footer from \"../footer/index\";\nimport Pie from \"../piechart/Pie\";\nimport Line from \"../Linegraph/Line\";\nimport Navigation from \"../NavBar/index\";\nimport Bar from \"../Bargraph/bargraph\";\n\nconst Main = () => {\n  const [incomes, setIncomes] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [expenses, setExpenses] = useState([]);\n  const [budgets, setBudgets] = useState([]);\n\n  // Updated base API URL with /api prefix\n  const apiUrl = \"http://localhost:8080\";\n\n  // Helper to get the auth headers from localStorage\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem(\"token\");\n    return {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`,\n    };\n  };\n\n  useEffect(() => {\n    getItems();\n    fetchExpenses();\n    fetchBudgets();\n  }, []);\n\n  // Fetch all budget plans for the authenticated user\n  const fetchBudgets = async () => {\n    try {\n      const res = await fetch(`${apiUrl}/api/budgetplan`, { headers: getAuthHeaders() });\n      if (!res.ok) throw new Error(\"Failed to fetch budget plans\");\n      const data = await res.json();\n      setBudgets(data);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Fetch expenses from backend with auth headers\n  const fetchExpenses = () => {\n    fetch(`${apiUrl}/api/expense`, { method: \"GET\", headers: getAuthHeaders() })\n      .then((res) => res.json())\n      .then((data) => setExpenses(data))\n      .catch(() => setError(\"Failed to fetch expenses\"));\n  };\n\n  // Fetch incomes for the authenticated user\n  const getItems = () => {\n    fetch(`${apiUrl}/income`, { method: \"GET\", headers: getAuthHeaders() })\n      .then((res) => res.json())\n      .then((data) => setIncomes(data))\n      .catch(() => setError(\"Failed to fetch incomes\"));\n  };\n\n  const totalIncome = incomes.reduce((sum, item) => sum + item.Amount, 0);\n  const totalExpense = expenses.reduce((sum, item) => sum + item.amount, 0);\n  const remainingBalance = totalIncome - totalExpense; \n\n  return (\n    <div>\n      <Navigation />\n      <div className={styles.main_container}>\n        {/* Dashboard Header */}\n        <header className={styles.dashboardHeader}>\n          <h1>Dashboard</h1>\n          <p>An overview of your financial status</p>\n        </header>\n\n        {/* Overview Section */}\n        <section className={styles.overview}>\n          <div className={styles.summaryCard}>\n            <h2>Total Income</h2>\n            <p className={styles.num}>${totalIncome}</p>\n          </div>\n          <div className={styles.summaryCard}>\n            <h2>Total Expense</h2>\n            <p className={styles.num2}>${totalExpense}</p>\n          </div>\n          <div className={styles.summaryCard}>\n            <h2>Remaining Balance</h2>\n            <p className={styles.num3}>${remainingBalance}</p>\n          </div>\n        </section>\n\n        {/* Charts Section */}\n        <section className={styles.chartsSection}>\n          <div className={styles.pie}>\n            <h2>Expense Distribution</h2>\n            <Pie />\n          </div>\n          \n          <div className={styles.chartWrapper}>\n            <h2>Budget Breakdown</h2>\n            <Bar />\n          </div>\n        </section>\n      </div>\n      <div className={styles.chartWrapper}>\n            <h2>Income vs Expense Trend</h2>\n            <Line />\n          </div>\n      {/* Budget Plans Section */}\n      <div className={styles.showBudget}>\n        <h2>My Budget Plans</h2>\n        {error && <div className={styles.error_msg}>{error}</div>}\n        <div className={styles.budgetGrid}>\n          {budgets.map((plan) => (\n            <div key={plan._id} className={styles.budgetCard}>\n              <div className={styles.budgetHeader}>\n                <span className={styles.icon}>{plan.icon}</span>\n                <span className={styles.budgetTitle}>{plan.name}</span>\n                <span className={styles.amount}>${plan.total}</span>\n              </div>\n              <p>{plan.items} Item(s)</p>\n              <div className={styles.progressBar}>\n                <div\n                  className={styles.progress}\n                  style={{ width: plan.total > 0 ? `${(plan.spent / plan.total) * 100}%` : \"0%\" }}\n                ></div>\n              </div>\n              <p className={styles.budgetInfo}>\n                ${plan.spent} Spent | ${plan.total - plan.spent} Remaining\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className={styles.foot}>\n        <Footer />\n      </div>\n    </div>\n  );\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}