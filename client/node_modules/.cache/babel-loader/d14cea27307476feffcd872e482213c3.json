{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nconst apiUrl = \"http://localhost:8080\"; // Helper to get the auth headers from localStorage\n\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem(\"token\");\n  return {\n    \"Content-Type\": \"application/json\",\n    \"Authorization\": `Bearer ${token}`\n  };\n}; // Custom hook to fetch incomes and calculate total\n\n\nconst useIncomeData = () => {\n  _s();\n\n  const [incomes, setIncomes] = useState([]);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    getItems();\n  }, []);\n\n  const getItems = () => {\n    fetch(`${apiUrl}/income`, {\n      method: \"GET\",\n      headers: getAuthHeaders()\n    }).then(res => res.json()).then(res => setIncomes(res)).catch(() => setError(\"Failed to fetch incomes\"));\n  };\n\n  const calculateTotalIncome = () => {\n    return incomes.reduce((sum, item) => sum + item.Amount, 0);\n  };\n\n  return {\n    incomes,\n    totalIncome: calculateTotalIncome(),\n    error,\n    getItems\n  };\n};\n\n_s(useIncomeData, \"cUuV1akC9ckYnBlo0f2WhL5ji+0=\");\n\nexport default useIncomeData;","map":{"version":3,"sources":["C:/Users/Aishwarya/Desktop/PRACTICE/newwexpo/expo - Copy/client/src/components/utilities/totalincome.js"],"names":["useEffect","useState","apiUrl","getAuthHeaders","token","localStorage","getItem","useIncomeData","incomes","setIncomes","error","setError","getItems","fetch","method","headers","then","res","json","catch","calculateTotalIncome","reduce","sum","item","Amount","totalIncome"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,MAAMC,MAAM,GAAG,uBAAf,C,CAEA;;AACA,MAAMC,cAAc,GAAG,MAAM;AAC3B,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,SAAO;AACL,oBAAgB,kBADX;AAEL,qBAAkB,UAASF,KAAM;AAF5B,GAAP;AAID,CAND,C,CAQA;;;AACA,MAAMG,aAAa,GAAG,MAAM;AAAA;;AAC1B,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,EAAD,CAAlC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMA,QAAQ,GAAG,MAAM;AACrBC,IAAAA,KAAK,CAAE,GAAEX,MAAO,SAAX,EAAqB;AAAEY,MAAAA,MAAM,EAAE,KAAV;AAAiBC,MAAAA,OAAO,EAAEZ,cAAc;AAAxC,KAArB,CAAL,CACGa,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESC,GAAD,IAASR,UAAU,CAACQ,GAAD,CAF3B,EAGGE,KAHH,CAGS,MAAMR,QAAQ,CAAC,yBAAD,CAHvB;AAID,GALD;;AAOA,QAAMS,oBAAoB,GAAG,MAAM;AACjC,WAAOZ,OAAO,CAACa,MAAR,CAAe,CAACC,GAAD,EAAMC,IAAN,KAAeD,GAAG,GAAGC,IAAI,CAACC,MAAzC,EAAiD,CAAjD,CAAP;AACD,GAFD;;AAIA,SAAO;AAAEhB,IAAAA,OAAF;AAAWiB,IAAAA,WAAW,EAAEL,oBAAoB,EAA5C;AAAgDV,IAAAA,KAAhD;AAAuDE,IAAAA;AAAvD,GAAP;AACD,CApBD;;GAAML,a;;AAqBN,eAAeA,aAAf","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nconst apiUrl = \"http://localhost:8080\";\r\n\r\n// Helper to get the auth headers from localStorage\r\nconst getAuthHeaders = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return {\r\n    \"Content-Type\": \"application/json\",\r\n    \"Authorization\": `Bearer ${token}`,\r\n  };\r\n};\r\n\r\n// Custom hook to fetch incomes and calculate total\r\nconst useIncomeData = () => {\r\n  const [incomes, setIncomes] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    getItems();\r\n  }, []);\r\n\r\n  const getItems = () => {\r\n    fetch(`${apiUrl}/income`, { method: \"GET\", headers: getAuthHeaders() })\r\n      .then((res) => res.json())\r\n      .then((res) => setIncomes(res))\r\n      .catch(() => setError(\"Failed to fetch incomes\"));\r\n  };\r\n\r\n  const calculateTotalIncome = () => {\r\n    return incomes.reduce((sum, item) => sum + item.Amount, 0);\r\n  };\r\n\r\n  return { incomes, totalIncome: calculateTotalIncome(), error, getItems };\r\n};\r\nexport default useIncomeData;"]},"metadata":{},"sourceType":"module"}